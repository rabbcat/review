<html>
<head>
  <title>seaJS和RequireJS</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.2.9200 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1169"/>
<h1>seaJS和RequireJS</h1>

<div>
<span><div>模块化的好处：不同模块的同名函数或者变量没有影响</div><div>js中的模块化规范：</div><div>AMD:( Asynchronous Module Definition)---异步模块定义---RequireJS---异步，在模块里预先加载依赖，使用的时候直接调用（代码已经存在 ）</div><div><span style="color: rgb(227, 0, 0);">---预加载，预执行（加载好依赖之后就去执行这个依赖），速度快，性能较好</span></div><div><span style="color: rgb(227, 0, 0);">---但是会浪费资源，依赖前置（依赖一开始就必须写好，不论执行与否）</span></div><div><span style="color: rgb(227, 0, 0);">---也支持CMD的使用require传递依赖，但是更推崇依赖前置的写法</span></div><div>CMD:(Common Module Definition)---通用模块定义，阿里的玉伯提出---seaJS---使用require函数引入依赖，什么时候用什么时候引入，然后调用</div><div><span style="color: rgb(227, 0, 0);">---预加载，懒执行（只是在需要使用的时候提前引入依赖，但只要不需要使用依赖，该依赖就不会被执行），但是性能较差</span></div><div><span style="color: rgb(227, 0, 0);">---依赖就近（</span><span style="color: rgb(227, 0, 0);">直到使用的时候才引入依赖</span><span style="color: rgb(227, 0, 0);">）</span></div><div>AMD和CMD服务于JS在浏览器端的运行</div><div>CommonJS----为了JS在后端运行--nodeJS</div><div><img src="seaJS和RequireJS_files/Image.png" type="image/png"/></div><div><span style="color: rgb(227, 0, 0);"><span style="font-size: 16px;"><b>seaJS的使用：</b></span></span></div><ul><li>主模块引包</li><li>在主模块的html页尾中配置seajs</li></ul><div>          
<div style="font-size: 14px; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, monospace; background-color: rgb(248, 248, 248); border-width: 1px 1px 1px 6px; border-style: solid; border-color: rgb(232, 232, 232); border-image: initial; border-radius: 0px 3px 3px 0px; padding: 1em 1.6em 1em 1.2em; margin: -0.5em 0px 1.1em; vertical-align: top; font-weight: normal; font-style: normal; color: rgb(68, 68, 68); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 102, 102);">// seajs 的简单配置</span><br/>
seajs<span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">.</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent;">config</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">(</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">{</span><br/>
  base<span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">:</span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 153, 0);">&quot;../sea-modules/&quot;</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">,</span><br/>
  alias<span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">:</span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">{</span><br/>
    <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 153, 0);">&quot;jquery&quot;</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">:</span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 153, 0);">&quot;jquery/jquery/1.10.1/jquery.js&quot;</span><br/>
  <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">}</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">}</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">)</span><br/><br/><div><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 102, 102);">// 加载入口模块</span></div><div>seajs<span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">.</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent;">use</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">(</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 153, 0);">&quot;./main.js&quot;</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">)</span></div></div></div><ul><li>定义模块及使用</li></ul><div>          
<div style="font-size: 14px; background-color: rgb(248, 248, 248); border-width: 1px 1px 1px 6px; border-style: solid; border-color: rgb(232, 232, 232); border-top-left-radius: 0px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 0px; padding: 1em 1.6em 1em 1.2em; margin: -0.5em 0px 1.1em; vertical-align: top; font-weight: normal; font-style: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Monaco, Consolas, 'Lucida Console', monospace;"><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 102, 102);">// 所有模块都通过 define 来定义</span><span style="color: rgb(68, 68, 68);"><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent;">define</span></span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">(</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(204, 153, 102);">function</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">(</span><span style="color: rgb(68, 68, 68);">require</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">,</span><span style="color: rgb(68, 68, 68);"> exports</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">,</span><span style="color: rgb(68, 68, 68);"> module</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">)</span><span style="color: rgb(68, 68, 68);"> </span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">{</span><span style="color: rgb(68, 68, 68);"><br/><br/>
 </span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 102, 102);">// 通过 require 引入依赖</span><span style="color: rgb(68, 68, 68);"><br/>
 </span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(204, 153, 102);">var</span><span style="color: rgb(68, 68, 68);"> $ </span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">=</span><span style="color: rgb(68, 68, 68);"> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent;">require</span></span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">(</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 153, 0);">'jquery'</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">);</span><span style="color: rgb(68, 68, 68);"><br/>
 </span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(204, 153, 102);">var</span><span style="color: rgb(68, 68, 68);"> Spinning </span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">=</span><span style="color: rgb(68, 68, 68);"> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent;">require</span></span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">(</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 153, 0);">'./spinning'</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">);</span><span style="color: rgb(68, 68, 68);"><br/><br/>
 </span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 102, 102);">// 通过 exports 对外提供接口</span><span style="color: rgb(68, 68, 68);"><br/>
  exports</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">.</span><span style="color: rgb(68, 68, 68);">doSomething </span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">=</span><span style="color: rgb(68, 68, 68);"> </span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">...</span><span style="color: rgb(68, 68, 68);"><br/><br/>
 </span> <span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(102, 102, 102);">// 或者通过 module.exports 提供整个接口</span><span style="color: rgb(68, 68, 68);"><br/>
  module</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">.</span><span style="color: rgb(68, 68, 68);">exports </span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">=</span><span style="color: rgb(68, 68, 68);"> </span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">...</span><span style="color: rgb(68, 68, 68);"><br/><br/></span></span><div><span style="font-family: Monaco, Consolas, 'Lucida Console', monospace;"><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">}</span><span style="margin: 0px; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background: transparent; color: rgb(51, 51, 51);">);</span></span></div></div></div><div>          </div><div>require---引入依赖模块--返回一个对象</div><div>exports===module.exports---输出模块，只有输出了其他模块才能通过require使用这个模块的功能</div><div>导出成员的方式：</div><div>1、如果导出的是单个的成员，那么一般使用 exports.成员名称 这种形式导出</div><div>2、如果导出的是一个对象，那么一般使用 module.exports 这种形式导出</div><div>3.也可以使用return，这个时候可以不传参数，jQuery源码就是这样做的</div><div>-----&gt;如果要引入jQuery，需要在源码最后手动模块化：（加入红色部分）</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>if ( typeof noGlobal === strundefined ) {</div><div>   window.jQuery = window.$ = jQuery;</div><div>  <b><span style="color: rgb(227, 0, 0);"> if ( typeof define === &quot;function&quot; ) {</span></b></div><div><b><span style="color: rgb(227, 0, 0);">      define(function(){return jQuery});</span></b></div><div><b><span style="color: rgb(227, 0, 0);">   }</span></b></div><div>}</div></div><div><br/></div><div><b>注意：不可以两种形式一块使用，否则会以module.exports为准</b></div><div>三个参数一般是不省略的，要省略也是从后面开始</div><div>必须先加载后使用</div><div>seaJS的同步和异步加载方式：</div><div>在main.js中引入m1.js，m1.js中引入m2.js</div><div>在m2.js中设置模块内容如下：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>define(function(require,exports,module){</div><div><br/></div><div>    console.log(2);</div><div>    exports.showlo= function () {</div><div>        console.log('m2');</div><div>    }</div><div><br/></div><div>});</div></div><div><br/></div><div>同步方式下m1中的模块设置如下：</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>define(function (require,exports,module) {</div><div>console.log(1);</div><div>var m2=require('./m2.js');</div><div>m2.showlo();</div><div>console.log(3);</div><div>})</div></div><div>依次打印：</div><div>1，2，m2,3</div><div>异步方式下m1中的模块设置如下：</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>define(function (require,exports,module) {<br/></div><div>console.log(1);</div><div>require.async('./m2.js', function (m2) {</div><div>    m2.showlo();</div><div>});</div><div>console.log(3);</div><div>})</div></div><div>依次打印：1,3,2,m2</div><div>也就是说：异步方式不等待依赖模块的导入，他会去在这期间去执行下一步，之后再回来执行和这个依赖模块有关的回调函数；</div><div>               同步方式是依次执行，依赖模块不导入完就不执行下一步（事实上，他的执行方式实质也是一步到位，只不过表现起来是同步）</div><div><span style="color: rgb(227, 0, 0);"><span style="font-size: 16px;"><b>RequireJS的使用：</b></span></span></div><div><span style="color: rgb(227, 0, 0);"><span style="font-size: 16px;"><b>和seajs的区别</b></span></span>:</div><ul><li>可以直接在main.html的script标签中使用data-main指定入口文件，seajs是使用seajs.use函数定义指定入口文件     </li><li>在主文件中引入依赖文件一般不需要使用require，定义模块的时候在第一个数组参数中注入依赖即可</li><li>使用return导出成员</li></ul><div> 相同：都使用define定义模块              </div><div>使用方法：</div><div>1.引包：使用data-main属性指定网页程序的主模块。</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;script src=&quot;js/require.js&quot; data-main=&quot;js/main&quot;&gt;&lt;/script&gt;</div></div><div><br/></div><div>2.入口文件中引入依赖文件--预加载</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>define(['./r1.js'],function (r1) {</div><div>    //console.log(r1.add(1,1));</div><div>    console.log(r1.sum(2, 4));</div><div>})</div></div><div>3.定义依赖模块</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>define(function () {</div><div>    var obj = {};</div><div><br/></div><div>    obj.sum = function(a,b){</div><div>        return parseInt(a) + parseInt(b);</div><div>    };</div><div><br/></div><div>    obj.abstract = function(a,b){</div><div>        return parseInt(a) - parseInt(b);</div><div>    }</div><div>    return obj;</div><div>})</div></div><div><br/></div><div><img src="seaJS和RequireJS_files/Image [1].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><br/></div></span>
</div></body></html> 