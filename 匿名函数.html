<html>
<head>
  <title>匿名函数</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.2.9200 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="774"/>
<h1>匿名函数</h1>

<div>
<span><div><font color="#333333" face="Microsoft YaHei, arial, 宋体, sans-serif, tahoma"><span style="font-size: 14px;">匿名函数</span></font></div><div><span style="color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, arial, 宋体, sans-serif, tahoma; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); display: inline !important; float: none;">this对象是在运行时基于函数的执行环境绑定的：在全局函数中，this等于window，而当函数被作为某个对象的方法调用时，this等于那个对象。不过，匿名函数的执行环境具有全局性，因为其this对象通常指向window。</span></div><div><span style="color: rgb(65, 173, 28);"><b><font face="Microsoft YaHei, arial, 宋体, sans-serif, tahoma"><span style="font-size: 14px;">为什么</span></font>(function {// code})（）可以实现自执行，而function {// code}（）不能？</b></span></div><div style="margin: 0px; padding: 5px 0px; box-sizing: border-box; list-style-type: none; text-decoration: none; -webkit-tap-highlight-color: transparent; -webkit-appearance: none; font-family: 'microsoft yahei', Arial, Helvetica, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">(1). 首先, 要清楚两者的区别:<br style="margin: 0px; padding: 0px; box-sizing: border-box; list-style-type: none; text-decoration: none; -webkit-tap-highlight-color: transparent; -webkit-appearance: none; font-family: &quot;microsoft yahei&quot;, Arial, Helvetica, sans-serif;"/>
(function {// code})是表达式, function {// code}是函数声明.<br style="margin: 0px; padding: 0px; box-sizing: border-box; list-style-type: none; text-decoration: none; -webkit-tap-highlight-color: transparent; -webkit-appearance: none; font-family: &quot;microsoft yahei&quot;, Arial, Helvetica, sans-serif;"/>
(2). 其次, js&quot;预编译&quot;的特点:
<div>js在&quot;预编译&quot;阶段, 会解释函数声明, 但却会忽略表达式.</div><div>(3). 当js执行到function() {//code}();时, 由于function() {//code}在&quot;预编译&quot;阶段已经被提升过, js会跳过function(){//code}, 试图去执行();, 故会报错;</div>
当js执行到(function {// code})();时, 由于(function {// code})是表达式, js会去对它求解得到返回值, 由于返回值是一 个函数, 故而遇到();时, 便会被执行.</div><div style="margin: 0px; padding: 5px 0px; box-sizing: border-box; list-style-type: none; text-decoration: none; -webkit-tap-highlight-color: transparent; -webkit-appearance: none; font-family: 'microsoft yahei', Arial, Helvetica, sans-serif; font-size: 14px; color: rgb(0, 0, 0); font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>另外， 函数转换为表达式的方法并不一定要靠分组操作符()，我们还可以用void操作符，~操作符，!操作符……</div></div><div>匿名函数的自执行方法：</div><div><font color="#333333" face="Microsoft YaHei, arial, 宋体, sans-serif, tahoma"><span style="font-size: 14px;">常见用法：</span></font></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>(function() {<br/></div><div>alert('water');<br/></div><div>})();<br/></div></div><div><span style="color: rgb(0, 0, 0); font-family: &quot;microsoft yahei&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); display: inline !important; float: none;">也可以带参数： </span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>(function(o) {<br/></div><div>alert(o);</div><div>})('water');<br/></div></div><div>链式调用：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>(function(o) {<br/></div><div>alert(o);<br/></div><div>return arguments.callee;<br/></div><div>})('water')('down');</div></div><div><br/></div><div>或者也可以用！~void+-来将函数声明转换成表达式：</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>void function(){</div><div>alert('water');</div><div>}();//据说效率最高~</div></div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>+function(){</div><div>alert('water');</div><div>}();</div></div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>-function(){</div><div>alert('water');</div><div>}();</div></div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>~function(){</div><div>alert('water');</div><div>}();</div></div><div><br/></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>!function(){</div><div>alert('water');</div><div>}();</div></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>(function(){</div><div>alert('water');</div><div>}());//有点强制执行的味道~</div></div><div>  </div><div>bootstrap，underscore,less,jquery,js script标签的位置</div></span>
</div></body></html> 