<html>
<head>
  <title>项目</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.2.9200 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1044"/>
<h1>项目</h1>

<div>
<span><div><img src="项目_files/Image.png" type="image/png" style="height: auto;"/></div><div><br/></div><div><img src="项目_files/Image [1].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><img src="项目_files/Image [2].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><img src="项目_files/Image [3].png" type="image/png" style="height: auto;"/></div><div><br/></div><div>国内折扣</div><div style="color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;!DOCTYPE html&gt;</div><div>&lt;html lang=&quot;en&quot;&gt;</div><div><br/></div><div>&lt;head&gt;</div><div>    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div>    &lt;title&gt;Document&lt;/title&gt;</div><div>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;</div><div>    &lt;!--第三方的css--&gt;</div><div>    &lt;link rel=&quot;stylesheet&quot; href=&quot;./lib/bootstrap/css/bootstrap.css&quot;&gt;</div><div>    &lt;!--自己的less样式--&gt;</div><div>    &lt;link rel=&quot;stylesheet/less&quot; href=&quot;./css/base.less&quot;&gt;</div><div>    &lt;link rel=&quot;stylesheet/less&quot; href=&quot;./css/inlanddiscount.less&quot;&gt;</div><div>      &lt;link rel=&quot;stylesheet/less&quot; href=&quot;./css/waitting.less&quot;&gt;</div><div>    &lt;!--less.js--&gt;</div><div>       &lt;script src=&quot;./lib/less/less.min.js&quot;&gt;&lt;/script&gt;</div><div>&lt;/head&gt;</div><div><br/></div><div>&lt;body&gt;</div><div>    &lt;div class=&quot;loader1&quot;&gt;</div><div>        &lt;span&gt;&lt;/span&gt;</div><div>        &lt;span&gt;&lt;/span&gt;</div><div>        &lt;span&gt;&lt;/span&gt;</div><div>        &lt;span&gt;&lt;/span&gt;</div><div>        &lt;span&gt;&lt;/span&gt;</div><div>    &lt;/div&gt;</div><div>    &lt;!--头部--&gt;</div><div>    &lt;header id=&quot;header&quot;&gt;</div><div>        &lt;h4&gt;国内折扣&lt;/h4&gt;</div><div>    &lt;/header&gt;</div><div><br/></div><div>    &lt;main id=&quot;inlanddiscount&quot;&gt;</div><div>        &lt;div class=&quot;inland-discount-list cu-friend&quot;&gt;</div><div>            &lt;ul&gt;</div><div><br/></div><div>            &lt;/ul&gt;</div><div>        &lt;/div&gt;</div><div>    &lt;/main&gt;</div><div>    &lt;!--尾部--&gt;</div><div>    &lt;!--尾部区域--&gt;</div><div>    &lt;footer id=&quot;footer&quot;&gt;</div><div>        &lt;div class=&quot;row&quot;&gt;</div><div>            &lt;div class=&quot;col-xs-4&quot;&gt;</div><div>                &lt;a href=&quot;&quot;&gt;登录&lt;/a&gt;</div><div>            &lt;/div&gt;</div><div>            &lt;div class=&quot;col-xs-4&quot;&gt;</div><div>                &lt;a href=&quot;&quot;&gt;注册&lt;/a&gt;</div><div>            &lt;/div&gt;</div><div>            &lt;div class=&quot;col-xs-4&quot;&gt;</div><div>                &lt;a href=&quot;&quot;&gt;&lt;img src=&quot;http://www.zuyushop.com/wap/images/top.jpg&quot; alt=&quot;&quot;&gt;返回顶部&lt;/a&gt;</div><div>            &lt;/div&gt;</div><div>        &lt;/div&gt;</div><div>        &lt;p&gt;&lt;a href=&quot;&quot;&gt;手机app下载 &lt;/a&gt;&lt;a href=&quot;&quot;&gt;慢慢买手机版 &lt;/a&gt; -- 掌上比价平台&lt;/p&gt;</div><div>        &lt;p&gt;m.manmanbuy.com &lt;/p&gt;</div><div>    &lt;/footer&gt;</div><div>&lt;/body&gt;</div><div>&lt;!--第三方js--&gt;</div><div>&lt;script type=&quot;text/html&quot; id=&quot;inlandTpl&quot;&gt;</div><div>    {{each result as value i}}</div><div>    &lt;li class=&quot;border-img&quot;&gt;</div><div>        &lt;a href=&quot;discount.html?productid=0&quot; title=&quot;《皮囊》 19.9元&quot;&gt;</div><div>            &lt;div class=&quot;img&quot;&gt;{{#value.productImg}}&lt;/div&gt;</div><div>            &lt;div class=&quot;title&quot;&gt;{{value.productName}}&lt;/div&gt;</div><div>            &lt;div class=&quot;subtit&quot;&gt;{{value.productPrice}}&lt;/div&gt;</div><div>            &lt;div class=&quot;info&quot;&gt;</div><div>                &lt;div class=&quot;mall&quot;&gt;{{value.productFrom}} | {{value.productTime}}&lt;/div&gt;</div><div>            &lt;/div&gt;</div><div>        &lt;/a&gt;</div><div>    &lt;/li&gt;</div><div>    {{/each}}</div><div>&lt;/script&gt;</div><div>&lt;script src=&quot;./lib/jquery/jquery.js&quot;&gt;&lt;/script&gt;</div><div>&lt;script src=&quot;./lib/bootstrap/js/bootstrap.js&quot;&gt;&lt;/script&gt;</div><div>&lt;script src=&quot;./lib/template/template.js&quot;&gt;&lt;/script&gt;</div><div>&lt;!--自己的index.js--&gt;</div><div>&lt;script src=&quot;./js/inlanddiscount.js&quot;&gt;&lt;/script&gt;</div><div><br/></div><div>&lt;/html&gt;</div></div><div><br/></div></div><div>懒加载方法</div><div><br/></div><div style="font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>$(function () {</div><div><br/></div><div>    /*========方法的调用========*/</div><div>    init();</div><div>    var Data = {};</div><div>    /*========方法的定义========*/</div><div><br/></div><div>    /*初始化*/</div><div>    function init() {</div><div>        getInlandDiscount();</div><div>    }</div><div><br/></div><div>    /*请求国内折扣数据*/</div><div>    function getInlandDiscount() {</div><div>        $.get(&quot;http://139.199.157.195:9090/api/getinlanddiscount&quot;, function (res) {</div><div>            Data = res;</div><div>            console.log(res.result.length)</div><div>            render();</div><div>        })</div><div>    }</div><div><br/></div><div>    /*渲染数据*/</div><div>    function render() {</div><div>        var newData = { result: [] };</div><div>        var leng=8;</div><div>        if(Data.result.length&lt;=8){</div><div>            leng=Data.result.length;</div><div>        }</div><div>        for (var i = 0; i &lt; leng; i++) {</div><div>            // 需要加载data.result的第一条数据，并且，加载完了之后 要删除掉第一条数据。然后把剩下的数据都往前面移动一个位</div><div>            // shift:从集合中把第一个元素删除，并返回这个元素的值。</div><div>            newData.result.push(Data.result.shift());</div><div>        }</div><div>        var html = template(&quot;inlandTpl&quot;, newData);</div><div>        $(&quot;#inlanddiscount ul&quot;).append(html);</div><div>            flag=false;</div><div>    }</div><div><br/></div><div>    var flag=false;</div><div>    window.onscroll = function () {</div><div>        if(Data.result.length==0||flag){</div><div>            return;</div><div>        }</div><div>        // 多余的总高度</div><div>        var height = $(&quot;#inlanddiscount ul&quot;).height() + $(&quot;#header&quot;).height() + $(&quot;#footer&quot;).height() - $(document.body).height();</div><div>        var disBottom = height - $(document.body).scrollTop();</div><div>        // console.log(disBottom);</div><div>        if (disBottom &lt; 50) {</div><div>            // console.log(&quot;加载数据&quot;)</div><div>            flag=true;</div><div>            render();</div><div>        }</div><div>    }</div><div>})</div></div><div><br/></div><div>首页</div><div><br/></div><div style="color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>$(function () {</div><div><br/></div><div>    /*====================方法的调用================*/</div><div>    init();</div><div>    /*====================方法的定义================*/</div><div><br/></div><div>    /*初始化*/</div><div>    function init() {</div><div>        getIndexMenu();</div><div>        addEvent();</div><div>    }</div><div><br/></div><div>    // /*绑定点击更多事件*/</div><div>    // function addEvent() {</div><div>    //     $(&quot;#menu&gt;.row&gt;div:nth-child(8)&quot;).click(function () {</div><div>    //         // console.log(&quot;11111111&quot;)</div><div>    //         $(&quot;#menu&gt;.row&gt;div:nth-last-child(-n+4)&quot;).slideToggle();</div><div>    //     })</div><div>    // }</div><div><br/></div><div>    // /*请求首页菜单数据*/</div><div>    // function getIndexMenu(){</div><div>    //     $.ajax({</div><div>    //         url:&quot;http://139.199.157.195:9090/api/getindexmenu&quot;,</div><div>    //         success:function(res){</div><div>    //             var html=template(&quot;menuTpl&quot;,res);</div><div>    //             $(&quot;#menu&gt;.row&quot;).html(html);</div><div><br/></div><div>    //              addEvent();</div><div>    //         }</div><div>    //     });</div><div>    // }</div><div><br/></div><div>    function getIndexMenu() {</div><div>        $.get(&quot;http://139.199.157.195:9090/api/getindexmenu&quot;, function (res) {</div><div>            var html = template(&quot;menuTpl&quot;, res);</div><div>            $(&quot;#menu&gt;.row&quot;).html(html);</div><div>        });</div><div>    }</div><div><br/></div><div>    /*绑定点击更多事件*/</div><div>    function addEvent() {</div><div>        // $(&quot;#menu&gt;.row&gt;div:nth-child(8)&quot;).click(function () {</div><div>        //     // console.log(&quot;11111111&quot;)</div><div>        //     $(&quot;#menu&gt;.row&gt;div:nth-last-child(-n+4)&quot;).slideToggle();</div><div>        // })</div><div>        // 事件委托的一个方式解决一个小bug</div><div>         $(&quot;#menu&gt;.row&quot;).on(&quot;click&quot;,&quot;&gt;div:nth-child(8)&quot;,function () {</div><div>            // console.log(&quot;11111111&quot;)</div><div>            $(&quot;#menu&gt;.row&gt;div:nth-last-child(-n+4)&quot;).slideToggle();</div><div>        })</div><div>    }</div><div>})</div></div><div><br/></div></div></div></span>
</div></body></html> 